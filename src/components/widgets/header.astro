---

import MenuSvg from '../icons/menu-svg.astro';
import Button from '../ui/button.astro';
import Nav from './nav.astro'

---

<header class="fixed bg-black/90 lg:bg-transparent  top-0 left-0 w-full  px-[1.18rem] py-6 z-[9999]  lg:px-20 flex justify-between items-center">


    <div class="flex items-center gap-x-2.5">
        <img src="/logo.svg" alt="Findtrend logo" width={40} height={40} />
        <span class="font-bold text-2xl text-white">Findtrend<span>
    </div>


    <Nav />

    <a href={'#signin'} class={`text-white lg:px-8 lg:py-4 text-lg  hover:text-color-p-1 transition-colors  hidden lg:block`}>Login</a>
    <Button href='#signup' className="py-3 bg-white font-normal hidden lg:block">Register</Button>
    <button id="menuButton" class="block lg:hidden z-[99991]">
        <MenuSvg />
    </button>
</header>

<style>
    
</style>

<script>
import { $ } from "../../lib/dom-selector"
const nav = $('.nav')
    const menuButton = $('button')
    const menuSvg = $('#menuSvg')
function toggleMenu(menuMobileContent: HTMLElement | null) {
    menuMobileContent?.classList.toggle("block")
    menuMobileContent?.classList.toggle("hidden")
    document.body.classList.toggle("overflow-hidden")
    document.body.classList.toggle("lg:overflow-auto")
}

function toggleMenuIcon(menuSvg: HTMLElement | null, openNavigation: boolean) {
        const rect1 = menuSvg?.querySelector('rect:nth-child(1)')
        const rect2 = menuSvg?.querySelector('rect:nth-child(2)')
        
        if (rect1 && rect2) {
            rect1.setAttribute('y', openNavigation ? "5" : "0")
            rect1.setAttribute('transform', `rotate(${openNavigation ? "45" : "0"})`)
            rect2.setAttribute('y', openNavigation ? "5" : "10")
            rect2.setAttribute('transform', `rotate(${openNavigation ? "-45" : "0"})`)
        }
    }

  

    menuButton?.addEventListener('click', () => {
            toggleMenu(nav)
            toggleMenuIcon(menuSvg, !nav.classList.contains('hidden'))
     })
</script>


